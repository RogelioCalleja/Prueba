{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ROGE-/ecomerce1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Cliente } from \"../cliente\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../carrito.service\";\nimport * as i2 from \"../data-sharing.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/table\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/stepper\";\nfunction TerminarCompraComponent_table_3_mat_header_cell_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Producto\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", element_r2.nombre, \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Descripci\\u00F3n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", element_r3.descripcion, \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Precio\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r4.precio), \"\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_cell_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-header-cell\");\n    i0.ɵɵtext(1, \"Quitar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_cell_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-cell\")(1, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function TerminarCompraComponent_table_3_mat_cell_12_Template_button_click_1_listener() {\n      const element_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.quitar(element_r6));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \" delete \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_header_row_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-row\");\n  }\n}\nfunction TerminarCompraComponent_table_3_mat_row_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-row\");\n  }\n}\nfunction TerminarCompraComponent_table_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 12);\n    i0.ɵɵelementContainerStart(1, 13);\n    i0.ɵɵtemplate(2, TerminarCompraComponent_table_3_mat_header_cell_2_Template, 2, 0, \"mat-header-cell\", 14)(3, TerminarCompraComponent_table_3_mat_cell_3_Template, 2, 1, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(4, 16);\n    i0.ɵɵtemplate(5, TerminarCompraComponent_table_3_mat_header_cell_5_Template, 2, 0, \"mat-header-cell\", 14)(6, TerminarCompraComponent_table_3_mat_cell_6_Template, 2, 1, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(7, 17);\n    i0.ɵɵtemplate(8, TerminarCompraComponent_table_3_mat_header_cell_8_Template, 2, 0, \"mat-header-cell\", 14)(9, TerminarCompraComponent_table_3_mat_cell_9_Template, 3, 3, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(10, 18);\n    i0.ɵɵtemplate(11, TerminarCompraComponent_table_3_mat_header_cell_11_Template, 2, 0, \"mat-header-cell\", 14)(12, TerminarCompraComponent_table_3_mat_cell_12_Template, 4, 0, \"mat-cell\", 15);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(13, TerminarCompraComponent_table_3_mat_header_row_13_Template, 1, 0, \"mat-header-row\", 19)(14, TerminarCompraComponent_table_3_mat_row_14_Template, 1, 0, \"mat-row\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataSource\", ctx_r6.productos);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r6.columnas);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r6.columnas);\n  }\n}\nfunction TerminarCompraComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 22);\n    i0.ɵɵtext(2, \"\\u00A1Gracias por su compra!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 23);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5, \"Su paquete llegar\\u00E1 a la direcci\\u00F3n especificada en los siguientes d\\u00EDas\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction TerminarCompraComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Por favor, rellene los formularios de los pasos anteriores \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let TerminarCompraComponent = /*#__PURE__*/(() => {\n  class TerminarCompraComponent {\n    constructor(carritoService, dataSharingService) {\n      this.carritoService = carritoService;\n      this.dataSharingService = dataSharingService;\n      this.compraTerminada = false;\n      this.productos = [];\n      this.columnas = ['nombre', 'descripcion', 'precio', 'quitar'];\n      this.clienteModel = new Cliente(\"\", \"\");\n    }\n    revisarYTerminar(stepper) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.clienteModel.direccion) {\n          return alert(\"Falta escribir la dirección del cliente\");\n        }\n        if (!_this.clienteModel.nombre) {\n          return alert(\"Falta escribir el nombre del cliente\");\n        }\n        const respuestaCompra = yield _this.carritoService.terminarCompra(_this.clienteModel);\n        console.log({\n          respuestaCompra\n        });\n        _this.compraTerminada = true;\n        stepper.next();\n        _this.dataSharingService.changeMessage(\"car_updated\");\n      })();\n    }\n    total() {\n      let total = 0;\n      this.productos.forEach(p => total += p.precio);\n      return total;\n    }\n    quitar(producto) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        yield _this2.carritoService.quitarProducto(producto.id);\n        yield _this2.obtenerProductos();\n        // Comunicación entre componentes\n        _this2.dataSharingService.changeMessage(\"car_updated\");\n      })();\n    }\n    obtenerProductos() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        _this3.productos = yield _this3.carritoService.obtenerProductos();\n      })();\n    }\n    irAPaso2() {}\n    ngOnInit() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        yield _this4.obtenerProductos();\n      })();\n    }\n    static #_ = this.ɵfac = function TerminarCompraComponent_Factory(t) {\n      return new (t || TerminarCompraComponent)(i0.ɵɵdirectiveInject(i1.CarritoService), i0.ɵɵdirectiveInject(i2.DataSharingService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TerminarCompraComponent,\n      selectors: [[\"app-terminar-compra\"]],\n      decls: 30,\n      vars: 8,\n      consts: [[\"stepper\", \"\"], [\"linear\", \"\"], [\"label\", \"Revisar total\"], [\"mat-table\", \"\", 3, \"dataSource\", 4, \"ngIf\"], [\"matStepperNext\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [\"label\", \"Datos del cliente\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Nombre\", 3, \"ngModelChange\", \"ngModel\"], [\"rows\", \"10\", \"matInput\", \"\", \"placeholder\", \"Direcci\\u00F3n de env\\u00EDo\", 3, \"ngModelChange\", \"ngModel\"], [\"matStepperPrevious\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"label\", \"Gracias por su compra\"], [4, \"ngIf\"], [\"mat-table\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"nombre\"], [4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"descripcion\"], [\"matColumnDef\", \"precio\"], [\"matColumnDef\", \"quitar\"], [4, \"matHeaderRowDef\"], [4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [1, \"mat-display-3\"], [\"src\", \"assets/order-complete.png\", \"alt\", \"Compra terminada\"]],\n      template: function TerminarCompraComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"mat-horizontal-stepper\", 1, 0)(2, \"mat-step\", 2);\n          i0.ɵɵtemplate(3, TerminarCompraComponent_table_3_Template, 15, 3, \"table\", 3);\n          i0.ɵɵelementStart(4, \"h2\");\n          i0.ɵɵtext(5);\n          i0.ɵɵpipe(6, \"currency\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"button\", 4);\n          i0.ɵɵtext(8, \"Continuar \");\n          i0.ɵɵelementStart(9, \"mat-icon\");\n          i0.ɵɵtext(10, \"arrow_forward\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(11, \"mat-step\", 5)(12, \"p\")(13, \"mat-form-field\")(14, \"input\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function TerminarCompraComponent_Template_input_ngModelChange_14_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.clienteModel.nombre, $event) || (ctx.clienteModel.nombre = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(15, \"p\")(16, \"mat-form-field\")(17, \"textarea\", 7);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function TerminarCompraComponent_Template_textarea_ngModelChange_17_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            i0.ɵɵtwoWayBindingSet(ctx.clienteModel.direccion, $event) || (ctx.clienteModel.direccion = $event);\n            return i0.ɵɵresetView($event);\n          });\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(18, \"button\", 8)(19, \"mat-icon\");\n          i0.ɵɵtext(20, \"arrow_back\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(21, \" Volver \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(22, \" \\u00A0 \");\n          i0.ɵɵelementStart(23, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function TerminarCompraComponent_Template_button_click_23_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const stepper_r8 = i0.ɵɵreference(1);\n            return i0.ɵɵresetView(ctx.revisarYTerminar(stepper_r8));\n          });\n          i0.ɵɵtext(24, \"Terminar compra \");\n          i0.ɵɵelementStart(25, \"mat-icon\");\n          i0.ɵɵtext(26, \"check\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(27, \"mat-step\", 10);\n          i0.ɵɵtemplate(28, TerminarCompraComponent_div_28_Template, 6, 0, \"div\", 11)(29, TerminarCompraComponent_div_29_Template, 2, 0, \"div\", 11);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.productos.length > 0);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(6, 6, ctx.total()), \"\");\n          i0.ɵɵadvance(9);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.clienteModel.nombre);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.clienteModel.direccion);\n          i0.ɵɵadvance(11);\n          i0.ɵɵproperty(\"ngIf\", ctx.compraTerminada);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.compraTerminada);\n        }\n      },\n      dependencies: [i3.NgIf, i4.MatIcon, i5.MatButton, i5.MatIconButton, i6.MatFormField, i7.MatTable, i7.MatHeaderCellDef, i7.MatHeaderRowDef, i7.MatColumnDef, i7.MatCellDef, i7.MatRowDef, i7.MatHeaderCell, i7.MatCell, i7.MatHeaderRow, i7.MatRow, i8.MatInput, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgModel, i10.MatStep, i10.MatStepper, i10.MatStepperNext, i10.MatStepperPrevious, i3.CurrencyPipe],\n      styles: [\"table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{max-width:500px}\"]\n    });\n  }\n  return TerminarCompraComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}